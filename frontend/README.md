# Parrot Set 前端使用说明

## 快速开始

### 1. 启动后端服务

```bash
# 确保在项目根目录
cd "E:\Project\Parrot Set"

# 激活虚拟环境
.\.venv\Scripts\activate

# 启动 FastAPI 服务
python app.py
# 或
uvicorn app:app --reload --host 0.0.0.0 --port 8000
```

### 2. 打开前端页面

有两种方式：

#### 方式 1：直接用浏览器打开（推荐）

直接双击 `frontend/index.html` 文件，或右键选择"用浏览器打开"

#### 方式 2：使用本地服务器（解决 CORS 问题）

如果遇到跨域问题，可以使用 Python 启动一个简单的 HTTP 服务器：

```bash
cd frontend
python -m http.server 8080
```

然后访问：http://localhost:8080

## 功能说明

### 批量上传
- 点击上传区域或拖拽图片到上传区域
- 支持多选文件
- 支持常见图片格式（JPG、PNG、GIF 等）

### 自动分类保存
1. 配置保存路径（默认：`./dataset`）
2. 勾选"自动保存分类结果到文件夹"
3. 点击"开始识别"
4. 系统会自动：
   - 识别每张图片
   - 根据 top1 结果创建对应文件夹
   - 保存图片到对应文件夹

### 文件夹结构

识别完成后，文件会按以下结构保存：

```
dataset/
├── 蓝黄金刚鹦鹉/
│   ├── image1_20241209_120000.jpg
│   ├── image2_20241209_120030.jpg
│   └── ...
├── 玄凤鹦鹉/
│   ├── image3_20241209_120100.jpg
│   └── ...
└── 虎皮鹦鹉/
    └── ...
```

## 配置说明

### 保存路径
- 相对路径：`./dataset`（相对于项目根目录）
- 绝对路径：`E:\Project\Parrot Set\dataset`
- 支持 `~` 符号：`~/Documents/parrots`

### 自动保存
- 勾选：识别完成后自动保存到文件夹
- 取消：只显示识别结果，不保存文件

## 注意事项

1. **后端服务必须运行**：前端需要连接到 `http://localhost:8000`
2. **Ollama 服务必须运行**：确保 Ollama 服务已启动
3. **文件路径权限**：确保有写入权限
4. **文件名冲突**：如果文件名已存在，会自动添加时间戳

## 故障排查

### 无法连接到后端
- 检查后端服务是否运行：访问 http://localhost:8000/health
- 检查端口是否正确（默认 8000）

### 识别失败
- 检查 Ollama 服务状态
- 查看浏览器控制台错误信息
- 检查图片格式是否支持

### 保存失败
- 检查保存路径是否正确
- 检查是否有写入权限
- 查看后端日志获取详细错误信息













